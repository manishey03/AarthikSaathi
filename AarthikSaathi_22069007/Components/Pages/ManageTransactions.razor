@page "/manageTransaction"
@using AarthikSaathi_22069007.Models
@using AarthikSaathi_22069007.Utilities
@inject NavigationManager NavigationManager

@page "/manage-transactions"
<div style="max-width: 1000px; margin: auto; padding: 20px; font-family: Arial, sans-serif;">
    <h2 style="text-align: center; color: #2D9CFD; margin-bottom: 40px;">Manage Transactions</h2>

    <!-- Import/Export Buttons -->
    <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
        <button style="padding: 10px 20px; background: #2D9CFD; color: white; border: none; border-radius: 8px; cursor: pointer; box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); transition: 0.3s;">
            Import Transactions
        </button>
        <button style="padding: 10px 20px; background: #2D9CFD; color: white; border: none; border-radius: 8px; cursor: pointer; box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); transition: 0.3s;">
            Export to CSV
        </button>
    </div>

    <!-- Transactions Table Heading -->
    <h3 style="margin-bottom: 20px; font-size: 20px; color: #333; text-align: left; border-bottom: 2px solid #2D9CFD; padding-bottom: 10px;">
        Transaction Records
    </h3>

    <!-- Transactions Table -->
    <table style="width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);">
        <thead>
            <tr style="background: #2D9CFD; color: white;">
                <th style="padding: 15px; text-align: left; border-right: 1px solid #e0e0e0;">Date</th>
                <th style="padding: 15px; text-align: left; border-right: 1px solid #e0e0e0;">Title</th>
                <th style="padding: 15px; text-align: left; border-right: 1px solid #e0e0e0;">Type</th>
                <th style="padding: 15px; text-align: left; border-right: 1px solid #e0e0e0;">Amount</th>
                <th style="padding: 15px; text-align: left;">Tags</th>
            </tr>
        </thead>
        <tbody>
            <tr style="border-bottom: 1px solid #e0e0e0;">
                <td style="padding: 15px;">2025-01-01</td>
                <td style="padding: 15px;">Salary</td>
                <td style="padding: 15px;">Credit</td>
                <td style="padding: 15px;">$2000</td>
                <td style="padding: 15px;">Income</td>
            </tr>
            <tr style="border-bottom: 1px solid #e0e0e0;">
                <td style="padding: 15px;">2025-01-05</td>
                <td style="padding: 15px;">Groceries</td>
                <td style="padding: 15px;">Debit</td>
                <td style="padding: 15px;">$200</td>
                <td style="padding: 15px;">Food</td>
            </tr>
            <tr>
                <td style="padding: 15px;">2025-01-10</td>
                <td style="padding: 15px;">Rent</td>
                <td style="padding: 15px;">Debit</td>
                <td style="padding: 15px;">$500</td>
                <td style="padding: 15px;">Housing</td>
            </tr>
        </tbody>
    </table>
</div>

@code {
    private string Username { get; set; }
    private string Password { get; set; }
    private string ErrorMessage { get; set; }

    private async Task PerformLogin() // Renamed from Login to
    {
        try
        {
            var users = await JsonFileHandler.ReadDataAsync<User>("wwwroot/data/users.json");
            var user = users.FirstOrDefault(u => u.Username == Username && u.Password == Password);

            if (user != null)
            {
                ErrorMessage = string.Empty;
                NavigationManager.NavigateTo("/");
            }
            else
            {
                ErrorMessage = "Invalid username or password.";
            }
        }
        catch (Exception ex)
        {
            ErrorMessage = "An error occurred: " + ex.Message;
        }
    }
}
